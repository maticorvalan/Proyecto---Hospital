extends ../../layout

block content
  .container.mx-auto.min-h-screen.py-8
    h1.text-3xl.font-semibold.text-gray-800.mb-6.text-center= title

    if error
      .bg-red-100.border-l-4.border-red-500.text-red-700.p-4.mb-6.rounded(role="alert")
        p.font-bold Error
        p= error

    form(action="/admision/nuevo-paciente" method="POST" class="bg-white shadow-lg rounded-lg px-8 pt-6 pb-8 mb-6 max-w-4xl mx-auto")
      //- SECCIÃ“N DATOS DEL PACIENTE
      section.mb-8
        h2.text-xl.font-semibold.text-gray-700.mb-4.pb-2.border-b.border-gray-200 Datos del Paciente
        div(class="grid grid-cols-1 md:grid-cols-2 gap-6")
          //- DNI
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="dni") DNI *
            input#dni.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              type="text"
              name="dni"
              value=dni
              placeholder="Ej: 12345678"
              required
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )

          //- Nombre
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="nombre") Nombre *
            input#nombre.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              type="text"
              name="nombre"
              placeholder="Nombre completo"
              required
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )

          //- Apellido
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="apellido") Apellido *
            input#apellido.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              type="text"
              name="apellido"
              placeholder="Apellido completo"
              required
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )

          //- Fecha de Nacimiento
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="fechaNacimiento") Fecha de Nacimiento *
            input#fechaNacimiento.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              type="date"
              name="fechaNacimiento"
              required
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )

          //- GÃ©nero
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="genero") GÃ©nero *
            select#genero.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              name="genero"
              required
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )
              option(value="" selected disabled) Seleccionar ðŸ¡«
              each genero in generos
                option(value=genero.id)= genero.nombre

          //- Provincia
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="provincia") Provincia *
            select#provincia.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              name="provincia"
              required
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )
              option(value="" selected disabled) Seleccionar ðŸ¡«
              each provincia in provincias
                option(value=provincia.id)= provincia.nombre     

          //-Localidad
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="localidad") Localidad *
            select#localidad.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              name="localidad"
              required
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )
              option(value="" selected disabled) Seleccionar ðŸ¡«

          //- DirecciÃ³n
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="direccion") DirecciÃ³n *
            input#direccion.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              type="text"
              name="direccion"
              required
              placeholder="DirecciÃ³n completa"
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )

          //- TelÃ©fono
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="telefono") TelÃ©fono *
            input#telefono.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              type="tel"
              name="telefono"
              required
              placeholder="NÃºmero de contacto"
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )
            .mb-4
              label.block.text-gray-700.text-sm.font-bold.mb-2(for="telefonoEmer") TelÃ©fono de Emergencia *
              input#telefono.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
                type="tel"
                name="telefonoEmer"
                required
                placeholder="NÃºmero de emergencia"
                class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )

          //- Email
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="email") Correo ElectrÃ³nico *
            input#email.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              type="email"
              name="email"
              required
              placeholder="correo@ejemplo.com"
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )

          //- Obra Social
          .mb-4
            label.block.text-gray-700.text-sm.font-bold.mb-2(for="mutuales") Obra Social *
            select#mutuales.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
              name="mutuales"
              required
              class="focus:outline-none focus:ring-2 focus:ring-blue-500"
            )
              option(value="" selected disabled) Seleccione una obra social ðŸ¡«
              each mutual in mutuales
                if mutual.TipoMutual
                  option(value=mutual.id)= mutual.nombre + ' (' + mutual.TipoMutual.nombre + ')'
                else
                  option(value=mutual.id)= mutual.nombre


      //- BOTONES
      .flex.items-center.justify-between.mt-8
        a(href="/admision" class="inline-flex items-center px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-400 transition-colors")
          | Cancelar
        button(type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors")
          | Registrar Paciente


  script.
    const provinciasData = !{JSON.stringify(provincias)};

  if error_msg
      script.
            Swal.fire({
                icon: 'error',
                title: '!ERROR!',
                text: '!#{error_msg}',
                confirmButtonText: 'Aceptar'
            })
  script(src="/js/script.js")
  





