extends ../layout

block content

    section.mb-10
        h1.text-5xl.font-bold.text-blue-600.text-center Menu de Admisión

    section.mb-8
            form(action="/admision/nuevo" method="post" class="text-xl grid grid-cols-2 gap-6") 
                .mb-3
                    label.block.text-gray-700.text-sm.font-bold.mb-2(for="tipoAdmision") Tipo de Admisión *
                    select#tipoAdmision.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
                        name="tipoAdmision"
                        required
                        class="focus:outline-none focus:ring-2 focus:ring-blue-500"

                    )
                        option(value="" disabled selected) Seleccione un tipo 🡫
                        each tipo in tiposAdmision
                            option(value=tipo.id)= tipo.nombre
                .mb-3
                    label.block.text-gray-700.text-sm.font-bold.mb-2(for="medicoDerivante") Médico Derivante (Si aplica)
                    input#medicoDerivante.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
                        type="text"
                        disabled
                        name="medicoDerivante"
                        placeholder="Nombre del médico"
                        class="focus:outline-none focus:ring-2 focus:ring-blue-500"
                    )
                .mb-3
                    label.block.text-gray-700.text-sm.font-bold.mb-2(for="tipoMotivo") Motivo de Consulta *
                    select#tipomotivo.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
                        name="tipoMotivo"
                        required
                        class="focus:outline-none focus:ring-2 focus:ring-blue-500"
                    )
                        option(value="" disabled selected) Seleccione un tipo 🡫
                        each tipo in tiposMotivo
                            option(value=tipo.id)= tipo.nombre
                .mt-3.col-span-2
                    label.block.text-gray-700.text-sm.font-bold.mb-2(for="detalleMotivo") Detalle *
                    textarea#detalleMotivo.shadow.appearance-none.border.rounded.w-full.py-2.px-3.text-gray-700.leading-tight(
                        name="detalleMotivo"
                        rows="4"
                        placeholder="Describa el motivo principal de la admisión..."
                        required
                        class="focus:outline-none focus:ring-2 focus:ring-blue-500"
                    ) 

                .mt-3.flex.justify-around.col-span-2
                    button(type="submit" class="bg-blue-600 hover:bg-gray-200 hover:text-black text-white font-bold py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors")
                        | Registrar Admisión
                    a(
                        class="inline-flex items-center gap-2 bg-blue-600 text-white hover:bg-gray-200 hover:text-black font-medium py-2 px-4 rounded transition"
                    )
                        img(src="/images/back.svg" alt="Volver" class="w-6 h-6")
                        | Volver
    if success_msg && success_msg != ''
        script.
                Swal.fire({
                    icon: 'success',
                    html: `<p><strong>!#{success_msg}</strong></p>`,
                    confirmButtonText: 'Aceptar'
                })
    if error_msg && error_msg != ''
        script.
                Swal.fire({
                    title: 'Turno sin asignar',
                    icon: 'error',
                    text: 'El paciente no tiene turno asignado, desea asignar uno nuevo?',
                    showCancelButton: true,
                    cancelButtonText: "No!",
                    cancelButtonColor: "#d33",
                    confirmButtonColor: "#3085d6",
                    confirmButtonText: "Si, Asignar!"
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = "/admision/turno";
                    }
                    });

    if warning_msg && warning_msg != ''
        script.
                Swal.fire({
                    icon: 'warning',
                    html: `<p><strong>#{warning_msg}!</strong></p>`,
                    confirmButtonText: 'Aceptar'
                })
    script(src="/js/script.js")